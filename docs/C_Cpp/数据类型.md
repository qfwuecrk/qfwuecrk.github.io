# 数据类型

**数据类型参考MSVC的文档，尽量移除Microsoft专用部分。**

## C语言数据类型

### 数据类型

**类型说明符**

| 类型 | 存储 |
|:-:|:-:|
| char, unsigned char, signed char | 1 个字节 |
| short，unsigned short | 2 个字节 |
| int，unsigned int | 4 个字节 |
| long，unsigned long | 4 个字节 |
| long long，unsigned long long | 8 个字节 |
| float | 4 个字节 |
| double | 8 个字节 |
| long double | 8 个字节 |

**类型说明符和等效项**

| 类型说明符 | 等效项 |
|--|--|
| signed char | char |
| signed int | signed，int |
| signed short int | short，signed short |
| signed long int | long，signed long |
| unsigned char | — |
| unsigned int | unsigned |
| unsigned short int | unsigned short |
| unsigned long int | unsigned long |
| float | — |
| long double | — |

!!! 说明 Note
    C 数据类型属于常规类别。 整型类型包括`int`、`char`、`short`、`long` 和 `long long`。 这些类型可使用 `signed` 或 `unsigned` 进行限定，`unsigned` 本身可以用作 `unsigned int` 的简写。 枚举类型 (`enum`) 在大多数情况下也被视为整型类型。 浮点类型包括`float、double` 和 `long double`。 “算术类型”包括所有浮点型和整型类型 。

!!! 说明 Info
    一般来说，`char` 型一般占一个字节8位。 `int` 一般占一个机器字长，4个字节32位。`short` 型占2个字节16位。 `long` 型和 `float` 型一般与 `int` 一样大。 `double` 类型相当于两个 `float` 类型64位。

- **char 类型**。`char` 类型用于存储可表示的字符集的成员的整数值。 该整数值是与指定字符对应的 ASCII 代码。
 
    ANSI 3.2.1.1“普通” `char` 的值范围是否与 `signed char` 或 `unsigned char` 相同（这句话是说char类型可以由符号或无符号。其实相当于有编译器决定有无符号了）。

    所有带符号的字符值的范围都介于 -128 和 127 之间。 所有无符号的字符值的范围介于 0 和 255 之间。

    **转义序列**

    | 转义序列 | 字符 | ASCII 值 |
    |:-:|:-:|:-:|
    | \a | 提醒/响铃 | 7 |
    | \b | Backspace | 8 |
    | \f | 换页 | 12 |
    | \n | 换行符 | 10 |
    | \r | 回车 | 13 |
    | \t | 水平制表符 | 9 |
    | \v | 垂直制表符 | 11 |
    | \" | 双引号 | 34 |
    | \' | 单引号 | 39 |
    | \\ | 反斜杠 | 92 |

- **int 类型**。`signed int` 或 `unsigned int` 项的大小是特定计算机上的标准整数大小。 例如，在 16 位操作系统中，`int` 类型通常是 16 位（或 2 字节）。 在 32 位操作系统中，int 类型通常是 32 位（或 4 字节）。 因此，`int` 类型与 `short int` 或 `long int` 类型等效，`unsigned int` 类型与 `unsigned short` 或 `unsigned long` 类型等效，具体视目标环境而定。 除非另有规定，否则所有 `int` 类型都表示带符号值。
    
    类型说明符 `int` 和 `unsigned int`（或简写为 `unsigned`）定义 C 语言的某些功能（例如，`enum` 类型）。 在这种情况下，特定实现的 `int` 和 `unsigned int` 的定义决定了实际存储。

    **整数值的范围**

    | 类型 | 最小值和最大值 |
    |--|--|
    | signed short | -32768 到 32767 |
    | unsigned long | 0 到 4294967295 |
    | signed long | -2147483648 到 2147483647 |

- **float 类型**。浮点数使用 IEEE（电气和电子工程师协会）格式。 浮点类型的单精度值具有 4 个字节，包括一个符号位、一个 8 位 excess-127 二进制指数和一个 23 位尾数。 尾数表示一个介于 1.0 和 2.0 之间的数。 由于尾数的高顺序位始终为 1，因此它不是以数字形式存储的。 此表示形式为 float 类型提供了一个大约在 3.4E-38 和 3.4E+38 之间的范围。

    您可根据应用程序的需求将变量声明为 float 或 double。 这两种类型之间的主要差异在于它们可表示的基数、它们需要的存储以及它们的范围。 下表显示了基数与存储需求之间的关系。

    **浮点类型**

    | 类型 | 有效位 | 字节数 |
    |:-:|:-:|:-:|
    | float | 6 - 7 | 4 |
    | double | 15 - 16 | 8 |

    浮点变量由尾数（包含数字的值）和指数（包含数字的数量级）表示。

    下表显示了分配给每个浮点类型的尾数和指数的位数。 任何 float 或 double 的最高有效位始终是符号位。 如果符号位为 1，则将数字视为负数；否则，将数字视为正数。

    **指数和尾数的长度**

    | 类型 | 指数长度 | 尾数长度 |
    |:-:|:-:|:-:|
    | float | 8 位 | 23 位 |
    | double | 11 位 | 52 位 |
    
    由于指数是以无符号形式存储的，因此指数的偏差为其可能值的一半。 对于 float 类型，偏差为 127；对于 double 类型，偏差为 1023。 您可以通过将指数值减去偏差值来计算实际指数值。

    存储为二进制分数的尾数大于或等于 1 且小于 2。 对于 float 和 double 类型，最高有效位位置的尾数中有一个隐含的前导 1，这样，尾数实际上分别为 24 和 53 位长，即使最高有效位从未存储在内存中也是如此。

    浮点包可以将二进制浮点数存储为非标准化数，而不使用刚刚介绍的存储方法。 “非标准化数”是带有保留指数值的非零浮点数，其中尾数的最高有效位为 0。 通过使用非标准化格式，浮点数的范围可以扩展，但会失去精度。 您无法控制浮点数以标准化形式还是非标准化形式表示；浮点包决定了表示形式。 浮点包从不使用非标准化形式，除非指数变为小于可以标准化形式表示的最小值。

    下表显示了可在每种浮点类型的变量中存储的最小值和最大值。 此表中所列的值仅适用于标准化浮点数；非标准化浮点数的最小值更小。 请注意，在 80x87 寄存器中保留的数字始终以 80 位标准化形式表示；数字存储在 32 位或 64 位浮点变量（float 类型和 long 类型的变量）中时只能以非标准化形式表示。

    **浮点类型的范围**

    | 类型 | 最小值 | 最大值 |
    |:-:|:-:|:-:|
    | 浮动 | 1.175494351 E - 38 | 3.402823466 E + 38 |
    | double | 	2.2250738585072014 E - 308 | 1.7976931348623158 E + 308 |

    如果存储比精度更重要，请考虑对浮点变量使用 float 类型。 相反，如果精度是最重要的条件，则使用 double 类型。

    浮点变量可以提升为更大基数的类型（从 float 类型到 double 类型）。 当您对浮点变量执行算术时，通常会出现提升。 此算术始终以与具有最高精度的变量一样高的精度执行。 例如，请考虑下列类型声明：

    ```c
    float f_short;
    double f_long;
    long double f_longer;
    
    f_short = f_short * f_long;
    ```

    在前面的示例中，变量 f_short 提升到类型 double 并且与 f_long 相乘；然后，结果舍入到类型 float，然后赋给 f_short。

    在以下示例中（使用前面示例中的声明），将以浮点（32 位）精度对变量执行算术；结果随后将提升到 double 类型：

    ```c
    f_longer = f_short * f_short;
    ```

- **类型 double**。双精度类型的双精度值具有 8 个字节。 此格式类似于浮点格式，只不过该格式具有一个 11 位 excess-1023 指数和一个 52 位尾数以及隐含的高顺序 1 位。 此格式为双精度类型提供的范围大约介于 1.7E-308 和 1.7E+308 之间。
    
- **长双精度类型**。`long double` 类型与 `double` 类型相同。`long double` 类型是大于或等于 `double` 类型的浮点类型。特定于 Microsoft：`long double` 和 `double` 的表示形式完全相同。 但是，编译器将 `long double` 和 `double` 视为非重复类型。

### 整数和浮点数的存储

C语言标准中针对数值常量，规定了八进制、十进制和十六进制。但是对二进制没有规定。但是很多编译器做了拓展允许存储二进制数。

整数和浮点数的存储由ISA决定。基本上整数以二进制补码存储，浮点数遵循IEEE - 754。[参阅【数值存储】](../ComputerScience/数值存储.md)。

## C++数据类型


## 类型转换
